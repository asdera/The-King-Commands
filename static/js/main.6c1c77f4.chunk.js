(this.webpackJsonpcommander=this.webpackJsonpcommander||[]).push([[0],{14:function(e,a,t){},15:function(e,a,t){},17:function(e,a,t){},19:function(e,a,t){"use strict";t.r(a);var o=t(0),n=t.n(o),c=t(7),i=t.n(c),r=(t(14),t(1)),s=t(2),l=t(4),m=t(3),h=t(5),p=(t(15),function(e){function a(){return Object(r.a)(this,a),Object(l.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h1",null,this.props.stage),this.props.hello?n.a.createElement(d,null):n.a.createElement(g,null),n.a.createElement("img",{src:"http://www.fen-to-image.com/image/"+this.props.size+"/"+this.props.fen,alt:"Chess Board"}))}}]),a}(n.a.Component)),g=function(e){function a(){return Object(r.a)(this,a),Object(l.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement("p",null,'Welcome, say "hello" to test your mic!')}}]),a}(n.a.Component),d=function(e){function a(){return Object(r.a)(this,a),Object(l.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement("p",null,"Hey there, your mic works! Good luck on your game!")}}]),a}(n.a.Component),v=t(8),u=t.n(v),b=(t(17),t(18)),k=new URLSearchParams(window.location.search),f=k.has("token"),C=k.get("token"),w=function(e){function a(){var e;return Object(r.a)(this,a),(e=Object(l.a)(this,Object(m.a)(a).call(this))).state={needsToken:2,turn:!1,white:!0,hello:!1,board:!1,gameId:"",fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",size:512},e}return Object(h.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(b){this.gameState((function(){b.state=this.state}));var a={hello:function(){console.log("hi"),e.setState({hello:!0})},gary:function(){console.log("goose"),e.setState({hello:!0})},castle:function(){var a=e.state.white?"e1g1":"e8g8";fetch("https://lichess.org/api/bot/game/"+e.state.gameId+"/move/"+a,{method:"POST",headers:{Accept:"application",Authorization:"Bearer "+C,"Content-Type":"application/json"}});var t=e.state.white?"e1c1":"e8c8";fetch("https://lichess.org/api/bot/game/"+e.state.gameId+"/move/"+t,{method:"POST",headers:{Accept:"application",Authorization:"Bearer "+C,"Content-Type":"application/json"}})},"castle short":function(){var a=e.state.white?"e1g1":"e8g8";fetch("https://lichess.org/api/bot/game/"+e.state.gameId+"/move/"+a,{method:"POST",headers:{Accept:"application",Authorization:"Bearer "+C,"Content-Type":"application/json"}})},"castle long":function(){var a=e.state.white?"e1c1":"e8c8";fetch("https://lichess.org/api/bot/game/"+e.state.gameId+"/move/"+a,{method:"POST",headers:{Accept:"application",Authorization:"Bearer "+C,"Content-Type":"application/json"}})},"*uci":{regexp:/^[a-h][1-8] [a-h][1-8]$/,callback:this.moveCommand},"piece *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"pawn *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"pain *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"pond *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"on *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"pause *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"minion *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"knight *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"night *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"knights *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"horse *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"cavalary *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"cowboy *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"bishop *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"wizard *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"mage *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"shazam *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"cleric *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"sorcerer *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"rook *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"brooke *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"rock *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"castlehead *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"ruck *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"tower *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"queen *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"dragon *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"princess *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"chancellor *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"lady *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"amazon *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"king *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"royal *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"president *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"crown *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"prince *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand},"pope *move":{regexp:/[a-h][1-8]$/,callback:this.moveCommand}};b.addCommands(a),b.addCallback("soundstart",(function(){console.log("listening...")})),b.addCallback("resultMatch",this.process),b.addCallback("result",(function(){console.log("stopped listening")})),2===this.state.needsToken&&b.start()}}},{key:"process",value:function(e,a,t){if(console.log(e),console.log(a),console.log(t),"*uci"!==a){if("piece *move"===a&&this.state.turn){var o=[["pawn","pain","pond","on","pause","minion",0],["night","knight","warrior","horse","cavalary","cowboy",0],["bishop","wizard","mage","shazam","cleric","sorcerer",0],["rook","brooke","rock","castlehead","ruck","tower","roxy","rough","rex","rick","wreck","rug",0],["queen","dragon","princess","chancellor","lady","amazon",0],["king","royal","president","crown","prince","pope",0]];t.forEach((function(e){for(var a=0;a<6;a++)for(var t=0;t<o[a].length-1;t++)e.toLowerCase().includes(o[a][t])&&o[a][o[a].length-1]++}));var n,c=Math.max.apply(Math,o.map((function(e){return e[e.length-1]})));o=o.filter((function(e){return e[e.length-1]===c})),n=6===o.length?"p":o[Math.floor(Math.random()*o.length)][0].slice(0,1),this.state.white&&(n=n.toUpperCase());var i=e.split(" ");i=i[i.length-1],console.log(c,n,o,i);var r=this.state.gameId;this.state.fenBoard.forEach((function(e,a){e.forEach((function(e,t){var o=("abcdefgh".slice(t,t+1)+(8-a)+i).toLowerCase();e!==n||"p"===n.toLowerCase()&&Math.abs("abcdefgh".indexOf(o[0])-"abcdefgh".indexOf(o[2]))>1||(console.log(o),fetch("https://lichess.org/api/bot/game/"+r+"/move/"+o,{method:"POST",headers:{Accept:"application",Authorization:"Bearer "+C,"Content-Type":"application/json"}}))}))}))}}else{console.log("uci",this);var s=e.replace(/\s/g,"").toLowerCase();fetch("https://lichess.org/api/bot/game/"+this.state.gameId+"/move/"+s,{method:"POST",headers:{Accept:"application",Authorization:"Bearer "+C,"Content-Type":"application/json"}})}}},{key:"moveCommand",value:function(e,a){}},{key:"gameState",value:function(e){var a=this;fetch("https://lichess.org/api/account/playing",{method:"GET",headers:{Accept:"application",Authorization:"Bearer "+C,"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){f&&t.nowPlaying?(t.nowPlaying.length?a.setState({board:!0,turn:t.nowPlaying[0].isMyTurn,white:"white"===t.nowPlaying[0].color,fen:t.nowPlaying[0].fen,fenBoard:new u.a(t.nowPlaying[0].fen).board,gameId:t.nowPlaying[0].gameId,lastMove:t.nowPlaying[0].lastMove,needsToken:2},e):a.setState({needsToken:1}),setTimeout(function(){this.gameState((function(){b.state=this.state}))}.bind(a),1e3)):a.setState({needsToken:0})}))}},{key:"render",value:function(){return n.a.createElement(p,{hello:this.state.hello,fen:this.state.fen,size:this.state.size,white:this.state.white,stage:["Please add your lichess.org personal access token to the current url - ?token=YOUR_API_TOKEN","Join a game on lichess.org to begin!","Speech Recognition Chess"][this.state.needsToken]})}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,a,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.6c1c77f4.chunk.js.map